var registerEventHandlers = function () {
  $('.user-profile .user-btn, .notification .noti').click(function () {
    $(this).next('ul').fadeToggle('fast');
  });

  $('.user-profile .user-btn,.notification .noti').blur(function () {
    $(this).next('ul').fadeOut('fast');
  });

  $('.pool-title:not(.not-clickable)').click(function () {
    $(this).next('.pool-description').slideToggle('fast');
    $(this).toggleClass('grey-bg');
    if ($(this).hasClass('grey-bg')) {
      $('> .col-20 > span.view-details', this).text('Close');
      initMap_show($(this).next('.pool-description').find('div.map-wrap'), false);
    }
    else {
      $('> .col-20 > span.view-details', this).text('View details');
    }
  });
  $('.pool-list ul li .pool-title button').click(function (e) {
    e.stopPropagation();
  });
};

$(document).ready(registerEventHandlers);
$(document).on("page:load", registerEventHandlers);