<h1>Welcome Admin</h1>

<div class="row">
  <div class="col-md-8 col-md-offset-2">

    <h2 class="create-form-heading"><%= "Edit Cab Pool" %></h2>

    <%= bootstrap_form_for(@cabpool, layout: :horizontal, label_col: "col-md-3", control_col: "col-md-7", url: admin_cabpool_update_path) do |f| %>
        <%= f.text_field :number_of_people, label: 'Capacity of Cab', disabled: true  %>

        <div class="form-group
          <% unless @cabpool.errors[:cabpool_types].empty? %> has-error
          <% end %>">
          <label class = 'control-label col-md-3 required '> Passengers </label>

          <div class = 'col-md-5'>
            <span class="label-purple  ">Add a passenger </span>
            <div id="passenger">
              <% @cabpool.users.each do |user| %>
                  <div id="userName"><label><%= user.name %></label>
                  <a href="javascript:;"><span class="glyphicon glyphicon-minus-sign" id="removePassenger"></span></a>
                  </div>
              <% end %>
            </div>
            <div class="passengersForm">
              <label class="control-label col-md-3 required pull-left" for="cabpool_users">Name</label>
              <%= collection_select(:users, DateTime.now.strftime('%Q').to_i, User.all, :id, :name, {prompt: true}, class: 'form-control') %>
            </div>
          </div>
          <a href="javascript:;"><span class="glyphicon glyphicon-plus" id="addPassenger"></span></a>
        </div>
        <div id="passengersSelection"></div>

        <%= render 'shared/error_messages', errors: @cabpool.errors[:users] if !@cabpool.errors[:users].empty? %>
        <%= f.time_field :timein, label: 'Arrival time to office', placeholder: 'HH:MM' , disabled: true %>
        <%= f.time_field :timeout, label: 'Departure time from office', placeholder: 'HH:MM' , disabled: true %>
        <%= f.hidden_field :route , value: @cabpool.route %>

        <div id="cabpool_type" class="form-group
              <% unless @cabpool.errors[:cabpool_types].empty? %> has-error
              <% end %> ">
          <label class="control-label col-md-3 required" for="cabpool_type">Cabpool  Type</label>
          <div class="col-md-7">
            <label class="control-label" ><%= @cabpool.cabpool_type.name %></label>
            <%= render 'shared/error_messages', errors: @cabpool.errors[:cabpool_types] if !@cabpool.errors[:cabpool_types].empty? %>
          </div>
        </div>

        <%= hidden_field_tag 'id', @cabpool.id %>
        <%= hidden_field_tag 'route', @cabpool.route %>
        <div id="map" class="map_show col-md-8 col-md-offset-3" style="height: 400px"></div>
        <%= f.submit "Update pool", class: "btn center-block" %>
        <script async defer
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCuETg3lyde0IR6XSO1WhVZY69bAp5owcs&callback=initMap_show">
        </script>
    <% end %>
  </div>
</div>